deployment:
  tasks:
    - echo "ğŸ” Starting deployment..."

    - export NODE_ENV=production

    - echo "ğŸ“¦ Installing backend dependencies..."
    - cd backend
    - npm install

    - echo "ğŸš€ Restarting backend app with PM2..."
    - pm2 restart server.js --name "backend-app" || pm2 start server.js --name "backend-app"

    - echo "ğŸ§± Building frontend..."
    - cd ../frontend
    - npm install
    - npm run build

    - echo "ğŸ§¹ Cleaning old frontend files..."
    - rm -rf ../public_html/*

    - echo "ğŸ“¤ Deploying frontend to public_html..."
    - cp -r build/* ../public_html/

    - echo "âœ… Deployment finished!"
